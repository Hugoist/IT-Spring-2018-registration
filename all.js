"use strict";function CustomValidation(i){this.invalidities=[],this.validityChecks=[],this.inputNode=i,this.registerListener()}CustomValidation.prototype={addInvalidity:function(i){this.invalidities.push(i)},getInvalidities:function(){return this.invalidities.join(". \n")},checkValidity:function(i){for(var t=0;t<this.validityChecks.length;t++){var e=this.validityChecks[t].isInvalid(i);e&&this.addInvalidity(this.validityChecks[t].invalidityMessage);var n=this.validityChecks[t].element;n&&(e?(n.classList.add("invalid"),n.classList.remove("valid")):(n.classList.remove("invalid"),n.classList.add("valid")))}},checkInput:function(){if(this.inputNode.CustomValidation.invalidities=[],this.checkValidity(this.inputNode),0===this.inputNode.CustomValidation.invalidities.length&&""!==this.inputNode.value)this.inputNode.setCustomValidity("");else{var i=this.inputNode.CustomValidation.getInvalidities();this.inputNode.setCustomValidity(i)}},registerListener:function(){var i=this;this.inputNode.addEventListener("keyup",function(){i.checkInput()})}};var firstNameValidityChecks=[{isInvalid:function(i){return i.value.length<3},invalidityMessage:"минимум 3 символа",element:document.querySelector('label[for="first-name"] .input-requirements li:nth-child(1)')},{isInvalid:function(i){return!!i.value.match(/[^a-zA-Zа-яА-Я]/g)},invalidityMessage:"только буквы",element:document.querySelector('label[for="first-name"] .input-requirements li:nth-child(2)')}],lastNameValidityChecks=[{isInvalid:function(i){return i.value.length<3},invalidityMessage:"минимум 3 символа",element:document.querySelector('label[for="last-name"] .input-requirements li:nth-child(1)')},{isInvalid:function(i){return!!i.value.match(/[^a-zA-Zа-яА-Я]/g)},invalidityMessage:"только буквы",element:document.querySelector('label[for="last-name"] .input-requirements li:nth-child(2)')}],emailValidityChecks=[{isInvalid:function(i){return!i.value.match(/[\@]/g)},invalidityMessage:"введите корректный адрес",element:document.querySelector('label[for="email"] .input-requirements li:nth-child(1)')}],passwordValidityChecks=[{isInvalid:function(i){return i.value.length<8|100<i.value.length},invalidityMessage:"пароль должен содержать от 8 до 100 латинских символов",element:document.querySelector('label[for="password"] .input-requirements li:nth-child(1)')},{isInvalid:function(i){return!i.value.match(/[0-9]/g)},invalidityMessage:"необходима минимум 1 цифра",element:document.querySelector('label[for="password"] .input-requirements li:nth-child(2)')},{isInvalid:function(i){return!i.value.match(/[a-z]/g)},invalidityMessage:"необходима минимум 1 строчная буква",element:document.querySelector('label[for="password"] .input-requirements li:nth-child(3)')},{isInvalid:function(i){return!i.value.match(/[A-Z]/g)},invalidityMessage:"необходима минимум 1 прописная буква",element:document.querySelector('label[for="password"] .input-requirements li:nth-child(4)')},{isInvalid:function(i){return!i.value.match(/[\!\@\#\$\%\^\&\*]/g)},invalidityMessage:"необходимо использовать спецсимволы",element:document.querySelector('label[for="password"] .input-requirements li:nth-child(5)')}],passwordConfirmValidityChecks=[{isInvalid:function(){return passwordConfirmInput.value!=passwordInput.value},invalidityMessage:"пароль должен совпадать"}],firstNameInput=document.getElementById("first-name"),lastNameInput=document.getElementById("last-name"),emailInput=document.getElementById("email"),passwordInput=document.getElementById("password"),passwordConfirmInput=document.getElementById("password_confirm");firstNameInput.CustomValidation=new CustomValidation(firstNameInput),firstNameInput.CustomValidation.validityChecks=firstNameValidityChecks,lastNameInput.CustomValidation=new CustomValidation(lastNameInput),lastNameInput.CustomValidation.validityChecks=lastNameValidityChecks,emailInput.CustomValidation=new CustomValidation(emailInput),emailInput.CustomValidation.validityChecks=emailValidityChecks,passwordInput.CustomValidation=new CustomValidation(passwordInput),passwordInput.CustomValidation.validityChecks=passwordValidityChecks,passwordConfirmInput.CustomValidation=new CustomValidation(passwordConfirmInput),passwordConfirmInput.CustomValidation.validityChecks=passwordConfirmValidityChecks;var inputs=document.querySelectorAll('input:not([type="submit"])'),submit=document.querySelector('input[type="submit"'),form=document.getElementById("registration");function validate(){for(var i=0;i<inputs.length;i++)inputs[i].CustomValidation.checkInput()}submit.addEventListener("click",validate),form.addEventListener("submit",validate);